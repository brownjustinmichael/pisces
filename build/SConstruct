import os
import SCons.Conftest

env = Environment (ENV = os.environ)

include_cuda = False
include_mpi = True

if include_mpi:
    env ["CXX"] = "mpic++"

    env.Append (CPPFLAGS = ["-D_MPI"])
    if include_cuda:
        env.Append (NVCCFLAGS = ["-D_MPI"])

if include_cuda:
    env.Tool ('cuda')
    env.Append (NVCCFLAGS = ["-g", "-arch=sm_20"])

env.Append (CPPFLAGS = ["-Wall", "-g", "-std=c++0x"])

env.SConscript ("../src/SConscript", variant_dir = ".", duplicate = 0, exports = {"env": env, "include_cuda": include_cuda})
